<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>System Calls CLI: System Calls CLI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">System Calls CLI
   </div>
   <div id="projectbrief">Authored by Sudipto Ghosh (51)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">System Calls CLI </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> This is a command-line program that can be used to demonstrate system calls in UNIX. It is written in C and uses the GNU C Library and the POSIX API.</p>
<p>This project was done as a part of the Advanced Operating Systems (MCSC202) course at the University of Delhi.</p>
<p>Function references are available online at <a href="https://syscalls-cli.ghosh.pro/html/files.html">https://syscalls-cli.ghosh.pro/html/files.html</a>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Features</h1>
<p>This program supports the following features as of now:</p>
<ul>
<li>creating a file/named pipe with permissions as given by user</li>
<li>reading from a file and printing the contents to <code>stdout</code></li>
<li>writing to a file from <code>stdin</code></li>
<li>displaying statistical information about a file</li>
<li>copying the contents of one file to another using an unnamed pipe</li>
<li>using a named pipe to communicate between two processes</li>
</ul>
<p><em>Note</em>: The reading and writing operations also support offsets and number of bytes to be read or written.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Commands</h1>
<p>The various commands supported by this program can be listed by running the program without any arguments.</p>
<div class="fragment"><div class="line">$ ./main</div>
<div class="line">Usage: ./main [command] [options...] [file1] [file2...]</div>
<div class="line">Commands:</div>
<div class="line">  create: create a file or a named pipe</div>
<div class="line">  read: read a file and print to stdout</div>
<div class="line">  write: write to a file</div>
<div class="line">  copy: copy a file using an unnamed pipe</div>
<div class="line">  info: information about a file</div>
<div class="line">  pipe: create a pipe and simulate communication between processes</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Usage</h1>
<p>Each command has its own set of options and arguments. The usage of each commmand can be known by executing <code>./main [command]</code>. The details of each command are given below.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Creating Files</h2>
<p>The <code>create</code> command should be used to create a file or a named pipe. The permissions of the file or named pipe have to be specified after the path as an octal number. The <code>-p</code> flag can be used to create a named pipe.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
Example: Creating a Regular File</h3>
<div class="fragment"><div class="line">$ ./main create file.txt 0644</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6"></a>
Example: Creating a Named Pipe</h3>
<div class="fragment"><div class="line">$ ./main create -p pipe 0666</div>
</div><!-- fragment --><p><em>Note</em>: In case the file or named pipe already exists, the program will exit with an error asking the user to pass the <code>-f</code> flag if they really want to do so.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Reading Files</h2>
<p>The <code>read</code> command should be used to read a file and print its contents to <code>stdout</code> i.e. the console. The <code>-o</code> flag can be used to specify the offset from which the file should be read. The <code>-n</code> flag can be used to specify the number of bytes to be read from the file. If the <code>-n</code> flag is not used, the entire file will be read. If the <code>-o</code> flag is not used, the file will be read from the beginning.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
Example: Reading a File</h3>
<div class="fragment"><div class="line">$ ./main read file.txt</div>
<div class="line">lorem ipsum dolor amet</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md9"></a>
Example: Reading a File (With Offset and Number of Bytes)</h3>
<div class="fragment"><div class="line">$ ./main read file.txt -o 6 -n 5</div>
<div class="line">ipsum</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
Writing to Files</h2>
<p>The <code>write</code> command should be used to write to a file from <code>stdin</code> - the console or a shell pipe. The <code>-o</code> flag can be used to specify the offset from which the file should be written to. The <code>-n</code> flag can be used to specify the number of bytes to be written to the file. If the <code>-n</code> flag is not used, the entire file will be written to. If the <code>-o</code> flag is not used, the file will be written to from the beginning.</p>
<p>The user is prompted with a message to enter the text to be written to the file. The user can enter the contents of the file. To end the input, the user has to type <code>:w</code> followed by the <code>Enter</code> key.</p>
<h3><a class="anchor" id="autotoc_md11"></a>
Example: Writing to a File</h3>
<div class="fragment"><div class="line">$ ./main write file.txt</div>
<div class="line">type :w to exit</div>
<div class="line">---------------</div>
<div class="line">lorem ipsum dolor amet</div>
<div class="line">:w</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
Copying Files</h2>
<p>The <code>copy</code> command should be used to copy the contents of one file to another using an unnamed pipe. If the destination file exists, the program will force the user to pass the <code>-f</code> flag to overwrite it.</p>
<h3><a class="anchor" id="autotoc_md13"></a>
Example: Copying a File</h3>
<div class="fragment"><div class="line">$ ./main copy file.txt file2.txt</div>
<div class="line">Copied file.txt to file2.txt...</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md14"></a>
File Information</h2>
<p>The <code>info</code> command should be used to display statistical information about a file. The information displayed includes the file type, permissions, number of hard links, owner, group, size, block size, number of blocks, last access time, last modification time, and last status change time.</p>
<h3><a class="anchor" id="autotoc_md15"></a>
Example: Displaying File Information (Regular File)</h3>
<div class="fragment"><div class="line">$ ./main info a.txt</div>
<div class="line">File: a.txt</div>
<div class="line">Type: regular file</div>
<div class="line">Device: 66311</div>
<div class="line">Major Device: 259</div>
<div class="line">Minor Device: 7</div>
<div class="line">Size: 15</div>
<div class="line">Blocks Allocated (in 512B units): 8</div>
<div class="line">Filesystem Block Size: 4096</div>
<div class="line">Inode: 15994677</div>
<div class="line">Links: 1</div>
<div class="line">Owner Permissions: rwx</div>
<div class="line">Group Permissions: rwx</div>
<div class="line">Other Permissions: rwx</div>
<div class="line">Owner User: sudipto (UID: 1000)</div>
<div class="line">Owner Group: sudipto  (GID: 1001)</div>
<div class="line">Last Accessed: Tue Jun 27 11:16:42 2023</div>
<div class="line">Last Modified: Tue Jun 27 15:04:14 2023</div>
<div class="line">Last Changed: Tue Jun 27 15:04:14 2023</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md16"></a>
Example: Displaying File Information (Special File)</h3>
<div class="fragment"><div class="line">$ ./main info /dev/nvme0n1p1</div>
<div class="line">File: /dev/nvme0n1p1</div>
<div class="line">Type: block device</div>
<div class="line">Device: 5</div>
<div class="line">Major: 0</div>
<div class="line">Minor: 5</div>
<div class="line">Size: 0</div>
<div class="line">Blocks Allocated (in 512B units): 0</div>
<div class="line">Filesystem Block Size: 4096</div>
<div class="line">Inode: 477</div>
<div class="line">Links: 1</div>
<div class="line">Owner Permissions: rw-</div>
<div class="line">Group Permissions: rw-</div>
<div class="line">Other Permissions: ---</div>
<div class="line">Owner User: root (UID: 0)</div>
<div class="line">Owner Group: disk  (GID: 995)</div>
<div class="line">Last Accessed: Sun Jun 25 08:18:52 2023</div>
<div class="line">Last Modified: Sun Jun 25 08:18:06 2023</div>
<div class="line">Last Changed: Sun Jun 25 08:18:06 2023</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md17"></a>
Pipes</h2>
<p>The <code>pipe</code> command should be used to create a pipe and simulate communication between two processes. This program can demonstrate this using both unnamed as well as named pipes.</p>
<h3><a class="anchor" id="autotoc_md18"></a>
Unnamed Pipes</h3>
<p>If used with <code>-u</code> flag, it creates an unnamed pipe. The user is prompted with a message to enter the text to be written to the pipe. The user can enter the contents of the pipe. To end the input, the user has to type <code>:q</code> followed by the <code>Enter</code> key. Internally, the program forks a child process and the parent process writes to the pipe and the child process reads it from the pipe and prints the contents to <code>stdout</code>.</p>
<div class="fragment"><div class="line">$ ./main pipe -u</div>
<div class="line">type :q to exit</div>
<div class="line">----------------</div>
<div class="line">Message: Hello</div>
<div class="line">Received from Parent: Hello</div>
<div class="line">Message: :q</div>
<div class="line">Received Bye from Parent...</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md19"></a>
Named Pipes</h3>
<p>If a path is specified, it uses a named pipe in the mode (reader or writer) specified by the argument after the path of the pipe. The user is prompted with a message to enter the text to be written to the pipe. The user can enter some text and press <code>Enter</code> to send the message. To end the input, the user has to type <code>:q</code> followed by the <code>Enter</code> key. If the pipe already exists, the program will force the user to pass the <code>-f</code> flag to overwrite it, otherwise, it will attempt to use the existing pipe.</p>
<p>Multiple instances of the program have to be run to demonstrate communication between processes. In case multiple readers are waiting for a writer, the first reader to read from the pipe will receive the message and the rest will receive an empty string. This is because the message is removed from the pipe after it is read. Which reader receives the message is determined by the operating system scheduler.</p>
<div class="fragment"><div class="line"># writer process</div>
<div class="line">$ ./main pipe pipe w        </div>
<div class="line">type :q to exit</div>
<div class="line">----------------</div>
<div class="line">Message: Hello World</div>
<div class="line">Message: :q </div>
<div class="line"> </div>
<div class="line"># reader process</div>
<div class="line">$ ./main pipe pipe r</div>
<div class="line">Waiting for writer...</div>
<div class="line">Received: Hello World</div>
<div class="line">Received Bye...</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md20"></a>
Author</h1>
<p>Sudipto Ghosh (51)<br  />
 Department of Computer Science<br  />
 University of Delhi </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
